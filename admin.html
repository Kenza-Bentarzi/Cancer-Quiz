<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© - ÙƒÙ†Ø²Ø©</title>
    <style>
        body {
            font-family: sans-serif;
            background: #2c3e50;
            color: white;
            text-align: center;
        }

        .btn {
            padding: 15px 30px;
            font-size: 20px;
            margin: 10px;
            cursor: pointer;
            border-radius: 10px;
            border: none;
        }

        .start {
            background: #27ae60;
            color: white;
        }

        .reset {
            background: #c0392b;
            color: white;
        }

        #results-list {
            background: white;
            color: black;
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            border-radius: 10px;
        }
    </style>
</head>

<body>
    <h1>Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ğŸ—ï¸</h1>
    <button class="btn start" onclick="nextQuestion()">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â¡ï¸</button>
    <button class="btn reset" onclick="resetGame()">ØªØµÙÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ğŸ”„</button>

    <div id="results-list">
        <h3>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</h3>
        <div id="data-container">Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
    </div>

    <script>
        const dbURL = "https://quiz-game-f3475-default-rtdb.firebaseio.com/";
        let currentStep = -1;

        async function nextQuestion() {
            currentStep++;
            await fetch(`${dbURL}gameState.json`, {
                method: 'PUT',
                body: JSON.stringify({ started: true, currentStep: currentStep })
            });
            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„ " + (currentStep + 1));
        }

        async function resetGame() {
            await fetch(`${dbURL}.json`, { method: 'DELETE' });
            currentStep = -1;
            alert("ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯");
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø­ÙŠØ§Ù‹
        setInterval(async () => {
            const res = await fetch(`${dbURL}results.json`);
            const data = await res.json();
            const container = document.getElementById('data-container');
            if (!data) { container.innerHTML = "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØªØ³Ø§Ø¨Ù‚ÙˆÙ† Ø­Ø§Ù„ÙŠØ§Ù‹"; return; }
            container.innerHTML = "";
            for (let user in data) {
                container.innerHTML += `<p><strong>${user}</strong>: ${data[user].score} Ù†Ù‚Ø·Ø©</p>`;
            }
        }, 3000);
    </script>
</body>

</html>